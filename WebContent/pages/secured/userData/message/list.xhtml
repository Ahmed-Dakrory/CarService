<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/dashboard2.xhtml">


	<ui:define name="title"> ALMZZAD</ui:define>
 <ui:define name="mainHead"> 
			       <ul class="mn-sub"><li class="mn-sub-item mn-item-vendors"><a href="shipperList.jsf" class="mn-sub-item-current"><b>Message List</b></a></li></ul>
           
			</ui:define>

	<ui:define name="content">
     #{loginBean.load_user_emails()}
     #{normalUserBean.handleAllUsersForAdmin()}
             <h:form name="aspnetForm" method="post" action="./shipperList.jsf" id="aspnetForm">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTMyOTAxODcyNQ8WAh4LT3JpZ2luYWxVcmwFN2h0dHBzOi8vd3d3LnVzYXRydC5jb20vYXBwL1VzZXJQYWdlcy9jb25zaWduZWVMaXN0LmFzcHgWAmYPZBYEAgIPDxYCHgRUZXh0BSdVc2VyOiBUYXJlayBTYWxsYWJpICg8c3Bhbj5Vc2VyPC9zcGFuPilkZAIED2QWAgIBD2QWCAIBDw8WAh8BBQM6IDhkZAIDDw9kFgQeC29ubW91c2VvdmVyBRh0aGlzLnN0eWxlLmN1cnNvcj0naGFuZCceCm9ubW91c2VvdXQFG3RoaXMuc3R5bGUuY3Vyc29yPSdkZWZhdWx0J2QCBQ8PZBYEHwIFGHRoaXMuc3R5bGUuY3Vyc29yPSdoYW5kJx8DBRt0aGlzLnN0eWxlLmN1cnNvcj0nZGVmYXVsdCdkAhEPPCsACwEADxYIHghEYXRhS2V5cxYAHgtfIUl0ZW1Db3VudAIIHglQYWdlQ291bnQCAR4VXyFEYXRhU291cmNlSXRlbUNvdW50AghkFgJmD2QWEAIBD2QWDmYPDxYCHwEFBTQ3MDkwZGQCAQ9kFgJmDw8WBB8BBQowMTA4MzQwNjE5HgtOYXZpZ2F0ZVVybAUkdmVuZG9yRWRpdC5hc3B4P2lkPTQ3MDkwJm1vZGU9c2VsZWN0ZGQCAg8PFgIfAQULRGFyIEFsbWF6YWRkZAIDDw8WAh8BBQlUYXJlayBBbGlkZAIEDw8WAh8BBQ4wMDIxODkxNTUyOTgxNWRkAgUPDxYCHwEFBiZuYnNwO2RkAgYPZBYCZg8PFgQfAQUUbS5hYnVzaG9mYUBnbWFpbC5jb20fCAUbbWFpbHRvOm0uYWJ1c2hvZmFAZ21haWwuY29tZGQCAg9kFg5mDw8WAh8BBQU0NzA5MmRkAgEPZBYCZg8PFgQfAQUKMDEwODM0MDYyMR8IBSR2ZW5kb3JFZGl0LmFzcHg/aWQ9NDcwOTImbW9kZT1zZWxlY3RkZAICDw8WAh8BBQhBZGF3bGlhYWRkAgMPDxYCHwEFDVRhcmVrIFNhbGxhYmlkZAIEDw8WAh8BBQYmbmJzcDtkZAIFDw8WAh8BBQYmbmJzcDtkZAIGD2QWAmYPDxYEHwEFFHRzYWxsYWJpNTVAZ21haWwuY29tHwgFG21haWx0bzp0c2FsbGFiaTU1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" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>
<style>

.ui-dialog {
    background: white;
    }
    </style>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="88B4B752" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAA1RCkE6u/6uOCyRBkoMrskGLx7fKNzlj0fP4iFkt5vkDKjVnI1aHqd3BKqvyfJlrR7ghBaTGSi+Vh3xUddSqGXa64jz+FgITGdTAl6Nl+NXSFJWcFFlihPc2E0B9EaIo/gbeywvB+Rf8WQyQ5FiZAHWMfcE8LRAM2mxsvStdpwc9XeDOOE2Th+/qvFAwWWIIzbaj94pJhNSRjJV2BNb3Z2QRKHzuxZ1fRu7Nu4yE+K7Q5/9qh2QKtJ8QTG1Llto9+zDLUfDgCDFmHcVSoW7tHEaV0FZipjjXm5qNkYNFtb6Z+mc/Zw=" />
</div>
            <div id="content">
                
    <!-- page src -->
    <table border="0" class="content-table" cellspacing="0" cellpadding="5">
        <tbody>
            <tr valign="top">
                <td width="100%">
                
                
                
						
                    <!-- Table 1 -->
                    <table width="100%" cellspacing="0" cellpadding="1" border="0" bgcolor="#003399">
                        <tr>
                            <td>
                                <table width="100%" cellspacing="0" cellpadding="8" border="0" bgcolor="#ffffff">
                                    <tr>
                                        <td>
                                            <!-- Table name block -->
                                            <table width="100%" cellspacing="0" cellpadding="0" border="0">
                                                <tr>
                                                    <td class="blkname" width="100%">
                                                        &nbsp;Messages List
                                                    </td>
                                                    
                                                </tr>
                                            </table>
                                            <table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-top: 4px">
                                                <tr>
                                                    <td style="height: 22px">
                                                        &nbsp;
                                  						 <h:commandButton name="ctl00$BodyHolder$cmdAddshipper" value="Send New Message" id="ctl00_BodyHolder_cmdAddshipper" action="#{loginBean.openDialogForMessage()}" class="btn btn-default" style="#{(loginBean.theUserOfThisAccount.role==1)?'display:none;':''} font-family:Verdana;font-size:10px;font-weight:bold;width:130px;"></h:commandButton>
								                    </td>
                                                    
                                                </tr>
                                            </table>
                                            <!-- End of Table name block -->
                                           <img src="#{resource['images:dumb.gif']}" width="1" height="3"/><br></br>
                                            <!-- Client DataGrid-->
                                            
                                            <section class="panel">
							
							<div class="panel-body">
								<table class="table table-bordered table-striped mb-none" id="datatable-tabletools" data-swf-path="assets/shipper/jquery-datatables/extras/TableTools/swf/copy_csv_xls_pdf.swf">
									<thead>
										<tr>
											<th>N#</th>
											<th>From</th>
											<th >To</th>
											<th >Subject</th>
											<th >Content</th>
											<th >Date</th>
											<th >Is Read</th>
										</tr>
									</thead>
									<tbody>
										
											<ui:repeat var="var" value="#{loginBean.all_messages}">
											<tr align="left" class="gradeX">
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
												#{var.id}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
													#{var.from_userId.userName}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
													#{var.to_userId.userName}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
													#{var.subject}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
													#{var.content}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
													#{var.date}
												</td>
												
												<td class="center hidden-phone" style="background-color:#FAFAFA;">
												
													#{var.readed}
													</td>
											</tr>
											
											</ui:repeat>
											
											
											
										
									</tbody>
								</table>
							
							
							</div>
						</section>
                                            
                                            
                                            <img src="#{resource['images:dumb.gif']}" width="1" height="3"/><br></br>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                    <!-- End of Table 1 -->
                    <img src="#{resource['images:dumb.gif']}" width="1" height="3"/><br></br>
                    <!-- Buttons block -->
                    <!--
			<table width="100%" cellspacing="0" cellpadding="1" border="0" bgcolor="#CCCCCC">
				<tr>
					<td>
						<table width="100%" cellspacing="0" cellpadding="5" border="0" bgcolor="#F7F7F7">
							<tr>
								<td>
									<table cellspacing="0" cellpadding="0" border="0">
										<tr>
		 									<TD width="100%"><IMG src="#{resource['images:dumb.gif']}" width="10" height="1"/></TD>
											<TD class="blkhdr" height="23"></TD>
										</tr>
									</table>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
			-->
                    <!-- End of Buttons block -->
                </td>
            </tr>
            <p>
                <tr>
                    <td colspan="2" bgcolor="white">
                    </td>
                </tr>
            </p>
        </tbody>
    </table>

            </div>  
        </h:form>
        
     
     
	</ui:define>
	
		
		
		
		<ui:define name="endOfContent">
		
		
		
			<p:dialog  header="Send Message" widgetVar="dlg2" minHeight="700"  width="700" showEffect="fade" modal="true" >
    
			<h:form class="container" id="formOfDialog" style=" width: 100%; ">
				<div class="row" >
					<div class="form-group col-md-12">
						<label>Subject</label>
						<br></br>
						<h:inputText class="inputDialog" value="#{loginBean.message_handler.subject}"/>
					</div>
					
					<div class="form-group col-md-4">
						<label>To:</label>
						<br></br>
						<h:selectOneMenu value="#{loginBean.number_redund}" name="ctl00$BodyHolder$ddlVendors" id="ctl00_BodyHolder_ddlVendors" class="inputDialog">
							<f:selectItem itemValue="#{null}" itemLabel="-SELECT-"/>
							<f:selectItems value="#{normalUserBean.allUsers}" var="var" itemLabel="#{var.company}" itemValue="#{var.id}"/>
						</h:selectOneMenu>
					</div>
				
				
					<div class="form-group col-md-12">
						<label>Message</label>
						<br></br>
						<p:inputTextarea rows="5" cols="70" counter="display" maxlength="100" counterTemplate="{0} characters remaining."   class="inputDialog" value="#{loginBean.message_handler.content}"/>
						<br />
    					<h:outputText id="display" />
					</div>
					
					
			
				
				</div>
				
				
				
			
				
				<br></br>
				<br></br>
						
						
				<div class="row">
					<div class="col-md-6">
						
					</div>
					
					
					<div class="col-md-3">
						<p:commandButton value="Cancel" onclick="PF('dlg2').hide();" style=" width: 100%; height: 39px; font-weight: 700;font-size: 19px; background: #aeaeae; border-radius: 8px; color: white!important; "/>
					</div>
					<div class="col-md-3">
						<p:commandButton value="Ok" action="#{loginBean.addMessage_and_send()}"  style="width: 100%;height: 39px;font-weight: 700;font-size: 19px;background: #5fbc6a;border-radius: 8px;color: white!important;"/>
					</div>
				</div>
				
				
				
				
			</h:form>
			
			
			
			
			
			</p:dialog>
			
			
			
			
			
		<script>
		
		$('.ui-icon-closethick').removeClass().addClass('fa fa-times');
		
		function runFromBackEndToReloadDialog(){
			PF('dlg2').show();
			
		}
		</script>	
			
		</ui:define>
	
	
</ui:composition>
</html>
